<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="[[ url_for('core-static', path='/core.css') ]]">
    <link rel="stylesheet" href="[[ url_for('core-static', path='/auth/auth.css') ]]">
</head>
<body>
    <form action="/auth/redirect" method="POST">
        <img id="logo" src="[[ url_for('core-static', path='/img/logo.svg') ]]">
        <div>
            <input type="text" id="username" name="username" required autofocus placeholder="Username">
        </div>
        <div>
            <input type="password" id="password" name="password" required placeholder="Password">
        </div>
        <div>
            <input type="hidden" name="referer" value="[[ referer ]]">
        </div>
        <div>
            <button type="submit" id="loginButton">Login</button>
        </div>
        {% if show_default_passwords %}
            Default users included out of the box:
            <ul>
                <li>admin:admin</li>
                <li>user:user</li>
            </ul>
            Change their passwords after initial login as admin.    
        {% endif %}
        <div class="error-message">
            [[ error_message ]]
        </div>
    </form>

    <!-- JavaScript to handle button color change -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const usernameInput = document.getElementById('username');
            const passwordInput = document.getElementById('password');
            const loginButton = document.getElementById('loginButton');

            // Function to check if both fields are filled
            function checkInputs() {
                if (usernameInput.value.trim() !== '' && passwordInput.value.trim() !== '') {
                    loginButton.classList.add('active');  // Add the 'active' class
                } else {
                    loginButton.classList.remove('active'); // Remove the 'active' class
                }
            }

            // Listen for input events on both fields
            usernameInput.addEventListener('input', checkInputs);
            passwordInput.addEventListener('input', checkInputs);
        });
    </script>

</body>
</html>
